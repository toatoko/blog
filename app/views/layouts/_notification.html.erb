<% cache ["notification_v2", notification.id, notification.updated_at, notification.read_at] do %>
  <li>
    <%= link_to notification.event&.url || '#', 
        class: "dropdown-item #{'fw-bold' if notification.read_at.nil?}" do %>
      <div class="d-flex justify-content-between align-items-start">
        <div class="flex-grow-1">
          <%= notification.event&.message || 'Notification' %>
        </div>
        <% if notification.read_at.nil? %>
          <small class="badge bg-primary rounded-pill">New</small>
        <% end %>
      </div>
      <% if notification.created_at %>
        <small class="text-muted d-block">
          <%= time_ago_in_words(notification.created_at) %> ago
        </small>
      <% end %>
    <% end %>
  </li>
<% end %>